/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Inventori.gui;

import Inventori.Items;
import Inventori.Kategori;
import Inventori.StokItem;
import Util.BackgroundImage;
import Util.BackgroundPane;
import java.awt.BorderLayout;
import java.io.File;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import javax.swing.text.DefaultFormatterFactory;
import javax.swing.text.NumberFormatter;

/**
 *
 * @author Yestin
 */
public class DaftarHarga extends javax.swing.JDialog {

    StokItem StokItem = new StokItem();
    Items Item = new Items();
    Kategori Kat =new Kategori();
    BackgroundImage BI = new BackgroundImage();
    /**
     * Creates new form DaftarHarga
     */
    public DaftarHarga(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        setTitle("Daftar Harga");
        BI.BackgroundJPanel(this, pnlDaftarHarga);
        Kat.getKategori(cboKategori);
        StokItem.getHargaItem(tblHarga);
        ftxtKodeKategori.setVisible(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        bgItems = new javax.swing.ButtonGroup();
        pnlDaftarHarga = new javax.swing.JPanel();
        rbNamaItem = new javax.swing.JRadioButton();
        rbKategori = new javax.swing.JRadioButton();
        rbSemua = new javax.swing.JRadioButton();
        txtNamaItem = new javax.swing.JTextField();
        cboKategori = new javax.swing.JComboBox<>();
        btnTampilkan = new javax.swing.JButton();
        scrlHarga = new javax.swing.JScrollPane();
        tblHarga = new javax.swing.JTable();
        btnTutup = new javax.swing.JButton();
        ftxtKodeKategori = new javax.swing.JFormattedTextField();
        btnEdit = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        bgItems.add(rbNamaItem);
        rbNamaItem.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        rbNamaItem.setForeground(new java.awt.Color(0, 0, 255));
        rbNamaItem.setText("Nama Item :");
        rbNamaItem.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                rbNamaItemItemStateChanged(evt);
            }
        });

        bgItems.add(rbKategori);
        rbKategori.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        rbKategori.setForeground(new java.awt.Color(0, 0, 255));
        rbKategori.setText("Kategori :");
        rbKategori.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                rbKategoriItemStateChanged(evt);
            }
        });

        bgItems.add(rbSemua);
        rbSemua.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        rbSemua.setForeground(new java.awt.Color(0, 0, 255));
        rbSemua.setSelected(true);
        rbSemua.setText("Semua");
        rbSemua.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                rbSemuaItemStateChanged(evt);
            }
        });

        txtNamaItem.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        txtNamaItem.setForeground(new java.awt.Color(0, 0, 255));
        txtNamaItem.setEnabled(false);

        cboKategori.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        cboKategori.setForeground(new java.awt.Color(0, 0, 255));
        cboKategori.setEnabled(false);
        cboKategori.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                cboKategoriItemStateChanged(evt);
            }
        });

        btnTampilkan.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icon/Tampilkan.png"))); // NOI18N
        btnTampilkan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTampilkanActionPerformed(evt);
            }
        });

        scrlHarga.setViewportView(tblHarga);

        btnTutup.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icon/Tutup.png"))); // NOI18N
        btnTutup.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnTutupActionPerformed(evt);
            }
        });

        ftxtKodeKategori.setEditable(false);
        ftxtKodeKategori.setForeground(new java.awt.Color(0, 0, 255));
        ftxtKodeKategori.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N

        btnEdit.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icon/Edit.png"))); // NOI18N
        btnEdit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEditActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pnlDaftarHargaLayout = new javax.swing.GroupLayout(pnlDaftarHarga);
        pnlDaftarHarga.setLayout(pnlDaftarHargaLayout);
        pnlDaftarHargaLayout.setHorizontalGroup(
            pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(scrlHarga)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlDaftarHargaLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(btnEdit)
                .addGap(52, 52, 52)
                .addComponent(btnTutup)
                .addGap(77, 77, 77))
            .addGroup(pnlDaftarHargaLayout.createSequentialGroup()
                .addGap(109, 109, 109)
                .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(rbNamaItem)
                    .addComponent(rbKategori)
                    .addComponent(rbSemua))
                .addGap(24, 24, 24)
                .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(ftxtKodeKategori, javax.swing.GroupLayout.PREFERRED_SIZE, 108, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(txtNamaItem, javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(cboKategori, javax.swing.GroupLayout.Alignment.LEADING, 0, 439, Short.MAX_VALUE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 139, Short.MAX_VALUE)
                .addComponent(btnTampilkan)
                .addGap(153, 153, 153))
        );
        pnlDaftarHargaLayout.setVerticalGroup(
            pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlDaftarHargaLayout.createSequentialGroup()
                .addGap(41, 41, 41)
                .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(pnlDaftarHargaLayout.createSequentialGroup()
                        .addComponent(btnTampilkan)
                        .addGap(89, 89, 89))
                    .addGroup(pnlDaftarHargaLayout.createSequentialGroup()
                        .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(rbNamaItem)
                            .addComponent(txtNamaItem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(rbKategori)
                            .addComponent(cboKategori, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(rbSemua)
                            .addComponent(ftxtKodeKategori, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(86, 86, 86)))
                .addComponent(scrlHarga, javax.swing.GroupLayout.PREFERRED_SIZE, 416, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(39, 39, 39)
                .addGroup(pnlDaftarHargaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(btnTutup)
                    .addComponent(btnEdit))
                .addContainerGap(20, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlDaftarHarga, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlDaftarHarga, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnTampilkanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTampilkanActionPerformed
        // TODO add your handling code here:
        if(rbKategori.isSelected()){
            int KodeKategori = (((Integer)ftxtKodeKategori.getValue()).intValue());
            StokItem.getHargaItem4(tblHarga, KodeKategori);
        }
        else if(rbNamaItem.isSelected()){
            String NamaItem = (((String)txtNamaItem.getText().trim()).toString());
            StokItem.getHargaItem3(tblHarga, NamaItem);
        }
        else if(rbSemua.isSelected()){
            StokItem.getHargaItem(tblHarga);
        }
    }//GEN-LAST:event_btnTampilkanActionPerformed

    private void cboKategoriItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_cboKategoriItemStateChanged
        // TODO add your handling code here:
        if(cboKategori.getSelectedIndex()==0){
            ftxtKodeKategori.setValue(new Integer(0));
        }
        else{
            String Kategori = ((String)cboKategori.getSelectedItem()).toString();
            int Kode = Kategori.indexOf(' ');
            String KodeKaetgori = Kategori.substring(0, Kode);
            int KodeKat = Integer.valueOf(KodeKaetgori);
            ftxtKodeKategori.setValue(new Integer(KodeKat));
        }
    }//GEN-LAST:event_cboKategoriItemStateChanged

    private void rbSemuaItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_rbSemuaItemStateChanged
        // TODO add your handling code here:
        txtNamaItem.setEnabled(false);
        cboKategori.setEnabled(false);
    }//GEN-LAST:event_rbSemuaItemStateChanged

    private void rbKategoriItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_rbKategoriItemStateChanged
        // TODO add your handling code here:
        txtNamaItem.setEnabled(false);
        cboKategori.setEnabled(true);
    }//GEN-LAST:event_rbKategoriItemStateChanged

    private void rbNamaItemItemStateChanged(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_rbNamaItemItemStateChanged
        // TODO add your handling code here:
        txtNamaItem.setEnabled(true);
        cboKategori.setEnabled(false);
    }//GEN-LAST:event_rbNamaItemItemStateChanged

    private void btnEditActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEditActionPerformed
        // TODO add your handling code here:
        int row = tblHarga.getSelectedRow();
        if(row<=-1){
            JOptionPane.showMessageDialog(this, "Item Belum Dipilih");
            return;
        }
        
        EditHarga EH = new EditHarga(null, true);
        
        DefaultTableModel dtm = (DefaultTableModel)tblHarga.getModel();
        
        String Barcode = (((String)dtm.getValueAt(row, 0)).toString());
        EH.txtBarcode.setText(Barcode);
        String NamaItem = Item.getNamaItem(Barcode);
        EH.txtNamaItem.setText(NamaItem);
        String Satuan = (((String)dtm.getValueAt(row, 2)).toString());
        EH.txtSatuan.setText(Satuan);
        Double HargaModal = (((Double)dtm.getValueAt(row, 3)).doubleValue());
        EH.ftxtHargaModal.setFormatterFactory(new DefaultFormatterFactory(new NumberFormatter(
                            new DecimalFormat("#,##0"))));
        EH.ftxtHargaModal.setValue(Double.valueOf(HargaModal));
        Double HargaJual = (((Double)dtm.getValueAt(row, 4)).doubleValue());
        EH.ftxtHargaJual.setFormatterFactory(new DefaultFormatterFactory(new NumberFormatter(
                            new DecimalFormat("#,##0"))));
        EH.ftxtHargaJual.setValue(Double.valueOf(HargaJual));
        Double Diskon = (((Double)dtm.getValueAt(row, 5)).doubleValue());
        EH.ftxtDiskon.setValue(new Double(Diskon));
        
        EH.setLocationRelativeTo(this);
        EH.setVisible(true);
    }//GEN-LAST:event_btnEditActionPerformed

    private void btnTutupActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnTutupActionPerformed
        // TODO add your handling code here:
        setVisible(false);
        dispose();
    }//GEN-LAST:event_btnTutupActionPerformed

    /**
     * @param args the command line arguments
     */

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup bgItems;
    private javax.swing.JButton btnEdit;
    private javax.swing.JButton btnTampilkan;
    private javax.swing.JButton btnTutup;
    private javax.swing.JComboBox<String> cboKategori;
    private javax.swing.JFormattedTextField ftxtKodeKategori;
    private javax.swing.JPanel pnlDaftarHarga;
    private javax.swing.JRadioButton rbKategori;
    private javax.swing.JRadioButton rbNamaItem;
    private javax.swing.JRadioButton rbSemua;
    private javax.swing.JScrollPane scrlHarga;
    private javax.swing.JTable tblHarga;
    private javax.swing.JTextField txtNamaItem;
    // End of variables declaration//GEN-END:variables
}
